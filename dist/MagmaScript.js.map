{"version":3,"sources":["webpack:///webpack/universalModuleDefinition","webpack:///webpack/bootstrap 36f865e732d36d9fe64d","webpack:///./src/MagmaScript.js","webpack:///external \"math\"","webpack:///external \"moment\""],"names":["evaluator","MagmaScript","toIdValue","value","undefined","Array","isArray","map","_idValue","script","entity","$","bind","newValue","_isNull","eval","val","prototype","isValidJson","JSON","parse","e","plus","pow","exp","denominator","Math","times","factor","div","age","toDate","floor","Date","now","categoryMapping","defaultValue","nullValue","idValue","group","arrayOfBounds","arrayOfOutliers","length","i","originalValue","lowerBound","upperBound","eq","other","matches","regex","test","isNull","not","or","and","gt","lt","ge","le","unit","newUnit","toUnit","targetUnit","math","toNumber","attr","attributes","split","result"],"mappings":"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","file":"MagmaScript.js","sourcesContent":["(function webpackUniversalModuleDefinition(root, factory) {\n\tif(typeof exports === 'object' && typeof module === 'object')\n\t\tmodule.exports = factory(require(\"math\"), require(\"moment\"));\n\telse if(typeof define === 'function' && define.amd)\n\t\tdefine([\"math\", \"moment\"], factory);\n\telse if(typeof exports === 'object')\n\t\texports[\"MagmaScript\"] = factory(require(\"math\"), require(\"moment\"));\n\telse\n\t\troot[\"MagmaScript\"] = factory(root[\"math\"], root[\"moment\"]);\n})(this, function(__WEBPACK_EXTERNAL_MODULE_1__, __WEBPACK_EXTERNAL_MODULE_2__) {\nreturn \n\n\n/** WEBPACK FOOTER **\n ** webpack/universalModuleDefinition\n **/"," \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId])\n \t\t\treturn installedModules[moduleId].exports;\n\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\texports: {},\n \t\t\tid: moduleId,\n \t\t\tloaded: false\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.loaded = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(0);\n\n\n\n/** WEBPACK FOOTER **\n ** webpack/bootstrap 36f865e732d36d9fe64d\n **/","import math from 'mathjs'\nimport moment from 'moment'\n\n/**\n * Looks up the '_idValue' value in objects.\n * @param value object or array of objects\n * @returns {*} value with _idValue property replaced in objects\n */\nexport const toIdValue = (value) => {\n  if(value === null) return null\n  if(value === undefined) return undefined\n  if(Array.isArray(value)) return value.map(toIdValue)\n  if(typeof value === 'object' && value['_idValue'] !== undefined) return value._idValue\n  return value\n}\n\n/**\n * Evaluates a script.\n *\n * @param script the script\n * @param entity object mapping attribute name key to attribute value\n * @returns the evaluated script result\n */\nexport function evaluator (script, entity) {\n  // make functions available to the script in local scope\n  // noinspection JSUnusedLocalSymbols\n  const $ = MagmaScript.$.bind(entity) //NOSONAR\n  // noinspection JSUnusedLocalSymbols\n  const newValue = MagmaScript.newValue // NOSONAR\n  // noinspection JSUnusedLocalSymbols\n  const _isNull = MagmaScript._isNull // NOSONAR\n  const value = eval(script)\n  return toIdValue(value)\n}\n\nexport function MagmaScript (val) {\n  this.val = val\n}\n\n/**\n *\n * Gives you the value of the attribute specified between $('')\n * notation\n *\n * Example: $('Height').value() returns the values of the height\n * attribute\n *\n * If the value is an object, returns the idValue\n *\n * @memberof MagmaScript\n * @method value\n *\n */\nMagmaScript.prototype.value = function () {\n  return this.val\n}\n\n/**\n * Returns true if your value is valid JSON\n * Returns false if not\n */\nMagmaScript.prototype.isValidJson = function () {\n  try {\n    JSON.parse(this.val)\n    this.val = true\n  } catch (e) {\n    this.val = false\n  }\n  return this\n}\n\n/**\n * returns the result of the first value plus the second value\n *\n * @param value: the number you want to add to the current value\n */\nMagmaScript.prototype.plus = function (value) {\n  if (!MagmaScript._isNull(value)) {\n    if (typeof value === 'object' || typeof value === 'function') {\n      this.val = this.val + value.value()\n    } else {\n      this.val = this.val + value\n    }\n  }\n  return this\n}\n\n/**\n * Gives you the exponent value of the attribute specified between\n * $('') notation\n *\n * Example: $('Height').pow(2).value() returns the result of\n * height_value ^ 2\n *\n * @param exp The number you use to execute the power function\n *\n * @memberof MagmaScript\n * @method pow\n */\nMagmaScript.prototype.pow = function (exp) {\n  if ((typeof denominator === 'object') && (typeof denominator.value === 'function')) {\n    exp = exp.value()\n  }\n  this.val = Math.pow(this.val, exp)\n  return this\n}\n\n/**\n * Gives you the multiplication value of the attribute specified between\n * $('') notation\n *\n * Example: $('Height').times(2).value() returns the result of\n * height_value * 2\n *\n * @param factor :\n  *            The number you multiply by\n *\n * @memberof MagmaScript\n * @method div\n */\nMagmaScript.prototype.times = function (factor) {\n  if ((typeof factor === 'object') && (typeof factor.value === 'function')) {\n    factor = factor.value()\n  }\n  this.val = (this.val * factor)\n  return this\n}\n\n/**\n * Gives you the division value of the attribute specified between\n * $('') notation\n *\n * Example: $('Height').div(2).value() returns the result of\n * height_value / 2\n *\n * @param denominator The number you divide by\n *\n * @memberof MagmaScript\n * @method div\n */\nMagmaScript.prototype.div = function (denominator) {\n  if ((typeof denominator === 'object') && (typeof denominator.value === 'function')) {\n    denominator = denominator.value()\n  }\n  this.val = (this.val / denominator)\n  return this\n}\n\n/**\n * Returns the age based on the date of birth and the current year\n *\n * Example: $('Date_Of_Birth').age().value()\n *\n * @memberof MagmaScript\n * @method age\n */\nMagmaScript.prototype.age = function () {\n  if (MagmaScript._isNull(this.val)) {\n    this.val = undefined\n  } else {\n    if (typeof this.val === 'string') {\n      this.val = moment(this.val, 'YYYY-MM-DD', true).toDate()\n    }\n    this.val = Math.floor((Date.now() - this.val) / (365.2425 * 24 * 60 * 60 * 1000))\n  }\n  return this\n}\n\n/**\n * Maps categories to each other.\n *\n * Example: Dataset1 -> Male = 1, Female = 2 Dataset2 -> Male = 0,\n * Female = 1 $('Dataset2').map({0:1, 1:2}).value()\n *\n * @param categoryMapping  The mapping in JSON format to apply\n * @param defaultValue     a value to use for categories that are not mentioned in the categoryMappign\n * @param nullValue        a value to use for null instances\n *\n * @memberof MagmaScript\n * @method map\n */\nMagmaScript.prototype.map = function (categoryMapping, defaultValue, nullValue) {\n  if (typeof categoryMapping === 'function') {\n    this.val = this.val.map(MagmaScript.newValue).map(categoryMapping)\n  } else {\n    const idValue = toIdValue(this.val)\n    if (idValue in categoryMapping) {\n      this.val = categoryMapping[idValue]\n    } else {\n      if (nullValue !== undefined && ((this.val === undefined) || (this.val === null))) {\n        this.val = nullValue\n      } else {\n        this.val = defaultValue\n      }\n    }\n  }\n  return this\n}\n\n/**\n * Group values into defined ranges\n *\n * Example: age -> 19, 39, 50, 75\n * $('age').group({18, 35, 50, 75}).value() produces the following ranges which are left inclusive, (-∞, 18), [18, 35), [35, 50), [50, 75), [75, +∞)\n * the text representations are '-18','18-35','35-50','50-75','75+'\n *\n * @param arrayOfBounds a list of values that will be the bounds of the ranges.\n * @param arrayOfOutliers a list of outlier values that will be not be grouped and will be returned as is.\n * @param nullValue a value to use for null instances\n *\n * @memberof MagmaScript\n * @method group\n */\nMagmaScript.prototype.group = function (arrayOfBounds, arrayOfOutliers, nullValue) {\n\n  // Check if the the value is an outlier value\n  if (arrayOfOutliers && arrayOfOutliers.length > 0) {\n    for (let i = 0; i < arrayOfOutliers.length; i++) {\n      if (this.val === arrayOfOutliers[i]) {\n        return this\n      }\n    }\n  }\n  // find the ranges that the value fits into\n  if (arrayOfBounds && arrayOfBounds.length > 0) {\n    let originalValue = this.val\n    if (originalValue < arrayOfBounds[0]) {\n      this.val = '-' + arrayOfBounds[0]\n    } else if (originalValue >= arrayOfBounds[arrayOfBounds.length - 1]) {\n      this.val = arrayOfBounds[arrayOfBounds.length - 1] + '+'\n    }\n    if (arrayOfBounds.length > 1) {\n      for (let i = 1; i < arrayOfBounds.length; i++) {\n        const lowerBound = arrayOfBounds[i - 1]\n        const upperBound = arrayOfBounds[i]\n        //If lowerBound is bigger than upperBound, restore the original value and stop the function\n        if (lowerBound > upperBound) {\n          this.val = nullValue ? nullValue : null\n          break\n        }\n        if (originalValue >= lowerBound && originalValue < upperBound) {\n          this.val = lowerBound + '-' + upperBound\n          break\n        }\n      }\n    }\n    return this\n  }\n\n  this.val = nullValue ? nullValue : null\n  return this\n}\n\n/**\n * Compares two values and returns true or false\n *\n * Example: $('Height').eq(100).value()\n *\n * @param other the value you wish to compare with\n *\n * @memberof MagmaScript\n * @method eq\n */\nMagmaScript.prototype.eq = function (other) {\n  if (MagmaScript._isNull(this.val) && MagmaScript._isNull(other)) {\n    this.val = false\n  } else if (MagmaScript._isNull(this.val) && !MagmaScript._isNull(other)) {\n    this.val = false\n  } else {\n    this.val = (this.value() === other)\n  }\n  return this\n}\n\n/**\n * Check if a value matches a regular expression\n *\n * Example: $('Username').matches(/^[a-z0-9_-]{6,18}$/).value()\n */\nMagmaScript.prototype.matches = function (regex) {\n  this.val = regex.test(this.val)\n  return this\n}\n\n/**\n * Check if a value is null\n *\n * Example: $('Height').isNull().value()\n *\n * @memberof MagmaScript\n * @method isNull\n */\nMagmaScript.prototype.isNull = function () {\n  this.val = MagmaScript._isNull(this.val)\n  return this\n}\n\n/**\n * Checks if a boolean is not\n *\n * Example: $('Has_Ears').not().value()\n *\n * @memberof MagmaScript\n * @method not\n */\nMagmaScript.prototype.not = function () {\n  this.val = !this.val\n  return this\n}\n\n/**\n * Checks if something is one value or the other\n *\n * Example: $('male').or($('female')).value()\n *\n * @param other Another value\n *\n * @memberof MagmaScript\n * @method or\n */\nMagmaScript.prototype.or = function (other) {\n  this.val = (this.val || other.value())\n  return this\n}\n\n/**\n * Checks if something is one value and the other\n *\n * Example: $('female').and($('pregnant')).value()\n *\n * @param other Another value\n *\n * @memberof MagmaScript\n * @method and\n */\nMagmaScript.prototype.and = function (other) {\n  this.val = (this.val && other.value())\n  return this\n}\n\n/**\n * Returns true or false if Greater then the submitted value\n *\n * Example: $('Height').gt(100).value()\n *\n * @param value The value you compare with\n *\n * @memberof MagmaScript\n * @method gt\n */\nMagmaScript.prototype.gt = function (value) {\n  this.val = MagmaScript._isNull(this.val) ? false : (this.value() > value)\n  return this\n}\n\n/**\n * Returns true or false if Less then the submitted value\n *\n * Example: $('Height').lt(100).value()\n *\n * @param value The value you compare with\n *\n * @memberof MagmaScript\n * @method lt\n */\nMagmaScript.prototype.lt = function (value) {\n  this.val = MagmaScript._isNull(this.val) ? false : (this.value() < value)\n  return this\n}\n/**\n * Returns true or false if Greater or equal then the submitted\n * value\n *\n * Example: $('Height').ge(100).value()\n *\n * @param value The value you compare with\n *\n * @memberof MagmaScript\n * @method ge\n */\nMagmaScript.prototype.ge = function (value) {\n  this.val = MagmaScript._isNull(this.val) ? false : (this.value() >= value)\n  return this\n}\n/**\n * Returns true or false if Less or equal then the submitted value\n *\n * Example: $('Height').le(100).value()\n *\n * @param value The value you compare with\n *\n * @memberof MagmaScript\n * @method le\n */\nMagmaScript.prototype.le = function (value) {\n  this.val = MagmaScript._isNull(this.val) ? false : (this.value() <= value)\n  return this\n}\n/**\n * Sets the measurement unit of the current value to the specified\n * unit. Returns the current unit when no argument is supplied.\n *\n * @memberof MagmaScript\n * @method unit\n */\nMagmaScript.prototype.unit = function (newUnit) {\n  if (!newUnit) {\n    return this.unit\n  }\n  this.unit = newUnit\n  return this\n}\n\n/**\n * Measurement unit conversion: converts the current value into a\n * different measurement unit.\n *\n * @memberof MagmaScript\n * @method toUnit\n */\nMagmaScript.prototype.toUnit = function (targetUnit) {\n  const unit = math.unit(this.val, this.unit)\n  this.val = unit.toNumber(targetUnit)\n  return this\n}\n\n/**\n * Stores the computed MagmaScript value after applying on of the mathematical\n * functions listed below\n *\n * In case of deep referencing attribute e.g. xref.xref2.label, we loop through these attributes and only return\n * new MagmaScript(label)\n *\n * @version 1.0\n * @namespace MagmaScript\n */\nMagmaScript.$ = function (attr) {\n  const attributes = attr.split('\\.')\n  let result = this // we expect the $ function be bound to the entity we're evaluating\n\n  for (let i = 0; i < attributes.length && result !== null; i++) {\n    result = result[attributes[i]]\n  }\n  return new MagmaScript(result)\n}\n\nMagmaScript._isNull = function (value) {\n  if (value === null || value === undefined)\n    return true\n  return (typeof value === 'string') && (value.length === 0)\n}\n\nMagmaScript.newValue = function (value) {\n  return new MagmaScript(value)\n}\n\nexport default MagmaScript\n\n\n\n/** WEBPACK FOOTER **\n ** ./src/MagmaScript.js\n **/","module.exports = __WEBPACK_EXTERNAL_MODULE_1__;\n\n\n/*****************\n ** WEBPACK FOOTER\n ** external \"math\"\n ** module id = 1\n ** module chunks = 0\n **/","module.exports = __WEBPACK_EXTERNAL_MODULE_2__;\n\n\n/*****************\n ** WEBPACK FOOTER\n ** external \"moment\"\n ** module id = 2\n ** module chunks = 0\n **/"],"sourceRoot":""}